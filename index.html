<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Простой Тетрис</title>
    <style>
        body {
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        canvas {
            border: 1px solid white;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="200" height="400"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gridSize = 20;
        const cols = canvas.width / gridSize;
        const rows = canvas.height / gridSize;

        // Текущий падающий блок
        const block = {
            x: Math.floor(cols / 2) - 1,
            y: 0,
            shape: [
                [1, 1],
                [1, 1]
            ],
            color: 'cyan'
        };

        // Игровое поле
        let grid = Array(rows).fill().map(() => Array(cols).fill(0));

        // Отрисовка
        function draw() {
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Рисуем блок
            ctx.fillStyle = block.color;
            for (let r = 0; r < block.shape.length; r++) {
                for (let c = 0; c < block.shape[r].length; c++) {
                    if (block.shape[r][c]) {
                        ctx.fillRect((block.x + c) * gridSize, (block.y + r) * gridSize, gridSize - 1, gridSize - 1);
                    }
                }
            }

            // Рисуем поле
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    if (grid[r][c]) {
                        ctx.fillStyle = 'gray';
                        ctx.fillRect(c * gridSize, r * gridSize, gridSize - 1, gridSize - 1);
                    }
                }
            }
        }

        // Проверка столкновений
        function collides(dx = 0, dy = 0) {
            for (let r = 0; r < block.shape.length; r++) {
                for (let c = 0; c < block.shape[r].length; c++) {
                    if (block.shape[r][c]) {
                        let newX = block.x + c + dx;
                        let newY = block.y + r + dy;
                        if (newX < 0 || newX >= cols || newY >= rows || (newY >= 0 && grid[newY][newX])) {
                            return true;
                        }
                    }
                }
            }
            return false;
        }

        // Закрепление блока на поле
        function merge() {
            for (let r = 0; r < block.shape.length; r++) {
                for (let c = 0; c < block.shape[r].length; c++) {
                    if (block.shape[r][c]) {
                        grid[block.y + r][block.x + c] = 1;
                    }
                }
            }
            block.x = Math.floor(cols / 2) - 1;
            block.y = 0;
        }

        // Движение вниз
        function drop() {
            if (!collides(0, 1)) {
                block.y++;
            } else {
                merge();
            }
            draw();
        }

        // Управление
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && !collides(-1, 0)) block.x--;
            if (e.key === 'ArrowRight' && !collides(1, 0)) block.x++;
            if (e.key === 'ArrowDown') drop();
            draw();
        });

        // Игровой цикл
        setInterval(drop, 500);
        draw();
    </script>
</body>
</html>
